- [인터넷 통신, 네트워크에 대한 이해](#인터넷-통신-네트워크에-대한-이해)
- [IP(인터넷 프로토콜)](#ip인터넷-프로토콜)
  - [IP(인터넷 프로토콜) 역할](#ip인터넷-프로토콜-역할)
  - [IP 프토토콜의 한계](#ip-프토토콜의-한계)
- [TCP / UDP](#tcp--udp)
  - [IP(인터넷 프로토콜의 4계층)](#ip인터넷-프로토콜의-4계층)
  - [TCP/IP 패킷 생성 과정](#tcpip-패킷-생성-과정)
  - [TCP/IP 패킷 정보](#tcpip-패킷-정보)
  - [TCP 특징](#tcp-특징)
  - [TCP 3-way handshake 과정](#tcp-3-way-handshake-과정)
  - [UDP](#udp)
- [Port, DNS](#port-dns)
  - [Port](#port)
  - [DNS(Domain Name System)](#dnsdomain-name-system)
- [URI](#uri)
  - [URI, URL, URN 뜻](#uri-url-urn-뜻)
  - [URL 전체 문법](#url-전체-문법)
  - [웹 브라우저 요청 흐름](#웹-브라우저-요청-흐름)

## 인터넷 통신, 네트워크에 대한 이해

웹이나 HTTP 모두 인터넷 네트워크 기반 위에 동작 ⇒ 인터넷 통신에 대한 이해 필요

## IP(인터넷 프로토콜)

### IP(인터넷 프로토콜) 역할

- 지정한 IP주소에 데이터 전달
- 패킷(Packet)이라는 단위로 데이터 전달
  - IP 패킷 정보에는 출발지 IP, 목적지 IP 주소, 전송 데이터 등이 포함
  - 인터넷 망의 노드에서 서로 던지면서 목적지로 패킷 전달
  - 클라이언트 패킷 전달 후(요청) 서버 패킷 전달(응답)이 이루어질 때, 요청과 응답 경로가 다를 수 있다.

### IP 프토토콜의 한계

- 비연결성 : 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
- 비신뢰성
  - 패킷 소실 : 중간에 패킷이 사라질 가능성이 있다.
  - 패킷 전달 순서 문제 발생 : 패킷이 순서대로 오지 않을 가능성이 있다.
- 프로그램 구분 : 같은 IP를 사용하는 서버에서 통신하는 Application이 둘 이상일 때 어떤 방식으로 구분하는지에 대한 문제

## TCP / UDP

### IP(인터넷 프로토콜의 4계층)

- 애플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

### TCP/IP 패킷 생성 과정

1. 프로그램으로 Hello, World! 메시지 생성
2. 메시지를 Socket 라이브러리를 통해 OS 개체에 전달
3. TCP 정보 생성 : 메시지 데이터를 포함하여 TCP 정보를 씌운다.
4. IP 패킷 생성 : TCP 데이터를 포함하여 IP 정보를 씌운다.
5. Ethernet Frame(Mac 주소 및 물리적인 정보 포함)을 포함하여 LAN 카드를 통해 나간다.

### TCP/IP 패킷 정보

- IP 패킷 + TCP 세그먼트
- TCP 세그먼트에 포함되는 정보
  - 출발지 Port, 목적지 Port, 전송 제어, 순서, 검증 정보

### TCP 특징

- TCP(Transmission Control Protocol), 전송 제어 프로토콜
- 신뢰할 수 있는 프로토콜, 대부분 TCP 사용
- TCP 주요 3가지 특징
  - 연결지향, TCP 3 way handshake - 연결을 한 후 메시지를 보낸다.
  - 데이터 전달 보증 - 패킷의 손실을 확인할 수 있다.
    - 클라이언트에서 데이터를 전송하고 서버에서 데이터를 잘 받았는지에 대한 메시지를 클라이언트로 전송
  - 순서 보장
    - 패킷의 순서가 잘못되었을 때, 서버가 클라이언트로부터 특정 패킷부터 다시 보내라는 메시지 전송

### TCP 3-way handshake 과정

1. 클라이언트에서 서버로 SYN(접속요청) 메시지를 보낸다.
2. 서버에서 클라이언트로 SYN(접속요청) + ACK(요청 수락) 메시지를 보낸다.
3. 클라이언트에서 서버로 ACK(요청 수락) 메시지를 보낸다.
4. 데이터를 전송한다.

### UDP

User Datagram Protocol - 사용자 데이터그램 프로토콜

- 연결지향 X, 데이터 전달 보증 X, 순서 보장 X
- 단순하고 빠름
- IP와 거의 같지만, Port와 체크섬(Checksum) 정도만 추가
- 애플리케이션에서 추가 작업 필요

## Port, DNS

### Port

같은 IP 내에서 동작하는 프로세스(애플리케이션)를 구분해주는 역할. IP(아파트), Port(몇동 몇호)

- 0 ~ 65535 할당 가능
- 0 ~ 1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음.
  - FTP - 20, 21
  - HTTP - 80
  - HTTPS - 443
  - TELNET - 23

### DNS(Domain Name System)

- IP 주소는 기억하기 어렵고, 변경될 수 있다.
- **사용자가 'google.com'과 같은 이름을 쉽게 기억하고 사용할 수 있게 해주는 동시에, 서버의 IP 주소가 바뀌더라도 해당 서버에 접속할 수 있도록 돕는 시스템**
- DNS 서버에 도메인 명을 등록하고, 도메인 명을 통해 IP 주소를 받을 수 있다.

## URI

- rfc 스펙
  - URI(Uniform Resource Identifier)는 로케이터(Locator), 이름(Name) 또는 둘다 추가로 분류될 수 있다.
    ![image.png](attachment:9e4c0c6d-d410-40d8-afaf-ae3fe1f75f61:image.png)
    ![image.png](attachment:a13119ee-d00d-48d6-91da-fd18c987beaa:image.png)

### URI, URL, URN 뜻

- Uniform : 리소스를 식별하는 통일된 방식
- Resource: 자원, URI로 식별할 수 있는 모든 것
- Identifier: 다른 항목과 구분하는데 필요한 정보
- URL(Locator): 리소스가 있는 위치 지정
- URN(Name) : 리소스에 이름을 부여
- 위치는 변할 수 있지만 이름은 변하지 않는다.

### URL 전체 문법

scheme://[userinfo@]host[:port][/path][?query][#fragment]

예시) https://www.google.com:443/search?q=hello&hl=ko

- scheme
  - 주로 프로토콜 사용
  - 프로토콜 : 어떤 방식으로 자원에 접근할 것인가 하는 약속, 규칙
    - ex) http(80), https(443), 포트 생략 가능
    - https는 http에 보안 추가(HTTP Secure)
- userinfo
  - URL에 사용자 정보를 포함해서 인증
  - 거의 사용 X
- host
  - 호스트명
  - 도메인명 또는 IP 주소 직접 사용
- port - 일반적으로 생략, http(80), https(443)
- path
  - 리소스 경로(path), 계층적 구조
    - /home/file1.jpg
    - /members
    - /members/100, /items/iphone12
- query
  - key = value 형태
  - ?로 시작, &로 추가 가능
  - query parameter, query string으로 불림
- fragment
  - html 내부 북마크 등에 사용
  - 서버에 전송하는 정보는 아님.

### 웹 브라우저 요청 흐름

1. https://www.google.com/search?q=hello&hl=ko 를 브라우저에 검색
2. DNS 서버에 호스트 (google.com) 조회해서 IP 및 PORT 얻어옴
3. 웹 브라우저가 HTTP 요청 메세지 생성
4. Socket 라이브러리 통해서 애플리케이션 -> OS 계층으로 전달
5. TCP/IP 패킷 생성 (전송 데이터에 아래와 같은 HTTP 메세지를 추가함)
6. 패킷 정보가 인터넷으로 흘러들어감
7. 구글 서버에 요청 패킷 도착
8. 구글 서버에서 TCP/IP 패킷 다 까서 버리고, HTTP 메세지 분석함
9. 구글 서버에서 응답 메세지를 만듦 (200 OK, Content-Type, Content-Length 등)
10. 클라이언트에 응답 패킷 도착
11. 응답 메세지를 열어서 웹 브라우저에 HTML 렌더링
