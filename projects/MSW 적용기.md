# ğŸ““Â MSW ì ìš© ë°°ê²½

## ğŸ’¡Â ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ - ìŠ¤í„°ë”” í”Œë«í¼

### ğŸ› Â í”„ë¡œì íŠ¸ ê¸°íšì˜ë„

- **ëˆ„êµ¬ë‚˜ ì‰½ê³  ë¹ ë¥´ê²Œ ì§€ì† ê°€ëŠ¥í•œ ìŠ¤í„°ë””ì— ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ ê°œë°œ**
- **ìŠ¤í„°ë”” ì§„í–‰ ì‚¬í•­ë„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ ê°œë°œ**

### ğŸ› Â í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥

- ìŠ¤í„°ë”” ëª¨ì§‘
- ìŠ¤í„°ë”” ì§„í–‰ ìƒí™© ê´€ë¦¬
- ìŠ¤í„°ë”” ì§€ì›

### ğŸ› Â ì£¼ìš” í˜ì´ì§€

- **ë©”ì¸ í˜ì´ì§€** - ì¸ê¸°ìˆëŠ” ìŠ¤í„°ë”” ëª¨ì§‘ ê³µê³ ë¥¼ ë³´ì—¬ì£¼ëŠ” ë©”ì¸í˜ì´ì§€
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/f9e91417-856f-4433-90f9-d93dff9187c1/Untitled.png)
- **ëª¨ì§‘ê³µê³  í˜ì´ì§€** - ì—¬ëŸ¬ ëª¨ì§‘ê³µê³ ë¥¼ í™•ì¸í•˜ëŠ” í˜ì´ì§€

  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/b77c28d9-334f-40bc-8467-cc10c13c2fec/Untitled.png)

- **ëª¨ì§‘ê³µê³  ìƒì„¸ í˜ì´ì§€** - ëª¨ì§‘ê³µê³ ì˜ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ëŠ” í˜ì´ì§€

  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/41cde457-6247-438a-b32a-dd584514af82/Untitled.png)

- **ìŠ¤í„°ë”” ìƒíƒœ í˜ì´ì§€** - ì§„í–‰ì¤‘ì¸ ìŠ¤í„°ë””ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/13061197-0338-4c04-b162-01c5ac5b6719/Untitled.png)
- **ë§ˆì´í˜ì´ì§€** - ë‚˜ì˜ ìŠ¤í„°ë”” ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/e3f7b665-b68d-45b3-a08e-3d1db4ab3d8a/Untitled.png)

## ğŸ’¡Â í”„ë¡œì íŠ¸ ì§„í–‰ ì‹œ ë°œìƒí•œ ë¬¸ì œ

### ğŸ› Â ë§¡ì€ ì—­í• 

- ë©”ì¸í˜ì´ì§€, ìŠ¤í„°ë”” ëª¨ì§‘ ê³µê³  ëª¨ì•„ë³´ê¸° í˜ì´ì§€, ìŠ¤í„°ë”” ìƒíƒœ í˜ì´ì§€ ë“±
  â‡’ **ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í•˜ì—¬, í™”ë©´ì— ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ ëŒ€ë¶€ë¶„ì¸ í˜ì´ì§€**

### ğŸ‘¿Â ë°œìƒí•œ ë¬¸ì œ

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/70c7c152-1df6-4ede-a14b-5cef8a375c33/Untitled.png)

- ë°±ì—”ë“œì—ì„œ APIê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.
  â‡’ **ë°±ì—”ë“œ ê°œë°œì— ì˜ì¡´ì **
- ê°œë°œì¤‘ì— ì¶”ê°€ ìˆ˜ì •ì‚¬í•­ì´ ë°œìƒí•˜ë©´, ì´ëŸ¬í•œ ì˜ì¡´ì ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ë°˜ë³µí•˜ê²Œ ëœë‹¤.
  â‡’ **FEì˜ ê¸°ëŠ¥ ê°œë°œ ì‹œê°„ ë° í…ŒìŠ¤íŠ¸ ì‹œê°„ ë¶€ì¡±**

### ğŸ¤”Â í•´ê²° ë°©ì•ˆ

- ì§ì ‘ MockData ì„¤ì •í•œ ìƒíƒœë¡œ ê°œë°œ ì§„í–‰
  â‡’ **ì´ëŠ” êµ¬í˜„ì´ ì‰½ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, HTTP ë©”ì„œë“œ ë° ì‘ë‹µ ìƒíƒœì— ë”°ë¥¸ ëŒ€ì‘ì´ ì‰½ì§€ ì•Šë‹¤ëŠ” ë‹¨ì **
- Mocking ì„œë²„ë¥¼ êµ¬í˜„í•˜ì—¬ ê°œë°œ
  â‡’ **êµ¬í˜„í•˜ëŠ”ë° ì‹œê°„ì´ ì†Œëª¨ë˜ë©°, ì‹¤ì œ ì„œë²„ì™€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì—¬ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ìƒí™© ë°œìƒ**
- **MSW**
  - ì„œë¹„ìŠ¤ ë¡œì§ì„ ì§ì ‘ ìˆ˜ì •í•  í•„ìš” X
  - ì§ì ‘ ëª¨í‚¹ ì„œë²„ë¥¼ êµ¬í˜„í•  í•„ìš” X
  - ì–´í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì´ ì•„ë‹Œ ë„¤íŠ¸ì›Œí¬ ë ˆë²¨ì—ì„œ ìš”ì²­ì„ ê°€ë¡œì±„ ì‘ë‹µì„ ë³´ë‚´ê¸° ë•Œë¬¸ì— ëª¨ë“  ì¢…ë¥˜ì˜ ë„¤íŠ¸ì›Œí¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ (axios, react-query ë“±) ë° ë„¤ì´í‹°ë¸Œ fetch ë©”ì„œë“œì™€ ì‚¬ìš© ê°€ëŠ¥

## â‡’ MSW ì‚¬ìš©

# ğŸ““Â MSW ì›ë¦¬

## ğŸ’¡Â MSW(Mock Service Worker)ë€

- Service Workerë¥¼ ì´ìš©í•´ ì„œë²„ë¥¼ í–¥í•œ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ(intercept) ëª¨ì˜ ì‘ë‹µì„ ë³´ë‚´ì£¼ëŠ” API Mocking ë¼ì´ë¸ŒëŸ¬ë¦¬

### ğŸ› Â Service Workerë€

- Service WorkerëŠ” ë¸Œë¼ìš°ì €ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸
- ì›¹ ì„œë¹„ìŠ¤ì™€ ë¸Œë¼ìš°ì € ë° ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì—ì„œ í”„ë¡ì‹œ ì„œë²„ì—­í• 
- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë¶„ë¦¬ëœ ë³„ë„ì˜ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ UI ë¸”ë¡ ì—†ì´ ì—°ì‚°ì„ ì²˜ë¦¬ ê°€ëŠ¥
  ğŸ”Â [Service Worker](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API)

## ğŸ’¡Â MSW ì‘ë™ ì›ë¦¬

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/33a9742e-f4e1-467d-a16e-04175afecc29/Untitled.png)

1. ë¸Œë¼ìš°ì €ê°€ Service Workerì— Request
2. Service Workerê°€ í•´ë‹¹ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ë³µì‚¬
3. ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³ , ì‚¬ìš©ìê°€ ì‘ì„±í•œ MSW ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ handlerì™€ ë§¤ì¹­
4. MSWê°€ ë“±ë¡ëœ handlerì—ì„œ Mocked response(ëª¨ì˜ ì‘ë‹µ)ë¥¼ Service Workerì—ê²Œ ì „ë‹¬
5. Service Workerê°€ Mocked Responseë¥¼ ë¸Œë¼ìš°ì €ì—ê²Œ ì „ë‹¬

# ğŸ““Â MSW ì ìš©

## ğŸ’¡Â MSW ì„¤ì •

- ë©”ì¸í˜ì´ì§€ì—ì„œ ì¸ê¸°ìˆëŠ” ëª¨ì§‘ê³µê³ ë¥¼ ê°€ì ¸ì˜¤ëŠ” API Mocking ì‘ì„±

### ğŸ“‹Â MSW ê´€ë ¨ í´ë” ë° íŒŒì¼ êµ¬ì¡°

```bash
-- public
    -- mockServiceWorker.js => **Service Worker íŒŒì¼**
		-- index.html
-- src
  	-- mocks
			  -- data => **Mock Data**
			  -- handlers => **Mock Responseë¥¼ ë°˜í™˜í•˜ëŠ” handler**
			  -- uitls => **Mock Dataë¥¼ ë³€í™˜í•˜ëŠ” uitil í•¨ìˆ˜**
			  -- browser.ts => **worker Instance ìƒì„± íŒŒì¼**
    -- App.tsx => **Root Component**
    -- index.tsx => **Entry point**
```

### ğŸ› Â MSW ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
yarn add msv --dev
```

### ğŸ›  Service Worker ë“±ë¡ì„ ìœ„í•œ Worker Script ìƒì„±

```bash
npx msw init public(ì§€ì •ê²½ë¡œ) --save
```

### ğŸ›  Worker Setup

```tsx
// ../src/Mocks/browser.ts
import { setupWorker } from 'msw/browser';
import { handlers } from './handlers';

export const worker = setupWorker(...handlers);
```

- Mock Responseë¥¼ ë°˜í™˜í•˜ëŠ” handlersë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ worker Instance ìƒì„±

### ğŸ›  Entry Pointì—ì„œ Worker ì„¤ì •

```tsx
// src/index.tsx
import ReactDOM from 'react-dom/client';
import { StrictMode } from 'react';

import App from './App.tsx';

const enableMocking = async () => {
  if (import.meta.env.DEV === false) return;
  const { worker } = await import('./mocks/browser');
  return worker.start();
};

enableMocking().then(() =>
  ReactDOM.createRoot(document.getElementById('root')!).render(
    <StrictMode>
      <App />
    </StrictMode>
  )
);
```

- dev í™˜ê²½ì‹œ workerê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡, ì• í”Œë¦¬ì¼€ì´ì…˜ ìµœìƒë‹¨ì—ì„œ ì¡°ê±´ë¶€ worker ì‹¤í–‰ ì½”ë“œë¥¼ ì„¤ì •í•œë‹¤.

### ğŸ›  ì¸ê¸°ìˆëŠ” ëª¨ì§‘ê³µê³  Mock Data ì‘ì„±

```tsx
//src/Mocks/data/mockData.ts
export const recruitmentDetailMockData: RecruitmentDetailRawDataType[] = [
  {
    id: 1,
    title: 'ì¸ê¸° ì½”í…Œ ìŠ¤í„°ë”” 1',
    stacks: ['Java'],
    positions: ['ë°±ì—”ë“œ'],
    ownerNickname: 'íœ´',
    way: 'ì˜¤í”„ë¼ì¸',
    startDateTime: '2024-03-01',
    endDateTime: '2024-04-01',
    recruitmentEndDateTime: '2024-02-01',
    createdDateTime: '2024-01-29',
    hits: 111,
    applicantCount: 5,
    platformUrl: 'https://open.kakao.com/o/222222',
    content: 'coding test',
    category: 'ì½”ë”© í…ŒìŠ¤íŠ¸',
    platform: 'ë””ìŠ¤ì½”ë“œ',
    memberCnt: 4,
    contact: 'ë””ìŠ¤ì½”ë“œ',
  },
  {
    id: 2,
    title: 'ì¸ê¸° ì½”í…Œ ìŠ¤í„°ë”” 2',
    stacks: ['Javascript'],
    positions: ['í”„ë¡ íŠ¸ì—”ë“œ'],
    ownerNickname: 'Hyun',
    way: 'ì˜¨ë¼ì¸',
    startDateTime: '2024-02-03',
    endDateTime: '2024-02-29',
    recruitmentEndDateTime: '2024-02-01',
    createdDateTime: '2024-01-14',
    hits: 222,
    applicantCount: 5,
    platformUrl: 'https://open.kakao.com/o/222222',
    content: 'coding test',
    category: 'ì½”ë”© í…ŒìŠ¤íŠ¸',
    platform: 'ë””ìŠ¤ì½”ë“œ',
    memberCnt: 4,
    contact: 'ë””ìŠ¤ì½”ë“œ',
  },
....
]

export const popularRecruitmentsMockData: PopularRecruitmentsRawDataType = {
  popularCodingRecruitments: [
    ...recruitmentDetailMockData
      .filter((recruitmentDetail: RecruitmentDetailRawDataType) => recruitmentDetail.category === 'ì½”ë”© í…ŒìŠ¤íŠ¸')
      .map((recruitmentDetail: RecruitmentDetailRawDataType) => {
			(ë°ì´í„° ë³€í™˜ì½”ë“œ)...
			})
      .sort((a, b) => b.hits - a.hits)
      .slice(0, 3),
  ],
  popularInterviewRecruitments: [
		....
  ],
  popularProjectRecruitments: [
	  ....
  ],
};
```

### ğŸ›  ì¸ê¸°ìˆëŠ” ëª¨ì§‘ê³µê³ ë¥¼ ë°˜í™˜í•˜ëŠ” handler ì‘ì„±

```tsx
//src/Mocks/handlers/recruitments.ts
import { HttpResponse, http } from 'msw';
import { popularRecruitmentsMockData } from '../data/mockData';

const baseURL = import.meta.env.VITE_MOCK_API_URL;

const getPopularRecruitments = http.get(`${baseURL}`, () => {
  return new HttpResponse(
    JSON.stringify({ data: popularRecruitmentsMockData, message: 'Success' }),
    {
      status: 200,
      statusText: 'OK',
    }
  );
});
```

### ğŸ›  ì¸ê¸°ìˆëŠ” ëª¨ì§‘ê³µê³ ë¥¼ ìš”ì²­í•˜ëŠ” api fetcher ì‘ì„±

```tsx
// src/apis/recruitments.ts
import { apiRequester } from '@/utils/axios';
import { useInfiniteQuery, useQuery } from '@tanstack/react-query';

export const getPopularRecruitments = () => apiRequester.get('/').then((res) => res.data);
export const usePopularRecruitments = () => {
  return useQuery({
    queryKey: ['popularRecruitments'],
    queryFn: () => getPopularRecruitments(),
  });
};
```

### ğŸ›  ë©”ì¸í˜ì´ì§€ì—ì„œ api fetcherë¥¼ í†µí•´ ì¸ê¸° ìˆëŠ” ëª¨ì§‘ê³µê³  Data ê°€ì ¸ì˜¤ê¸°

```tsx
//src/pages/main.tsx
import styled from 'styled-components';
import { bannerDummy } from '../../Shared/dummy';
import Banner from '../../Components/Banner';
import { usePopularRecruitments } from '@/Apis/recruitment';
import { convertPopularRecruitmentsToStudyCardProps } from '@/Utils/propertyConverter';
import CardListInfo from '@/Components/CardListInfo';
import PopularStudyCardList from '@/Components/PopularCardList';
import Button from '@/Components/Common/Button';
import { Up } from '@/Assets';
import UtiltiyButtons from '@/Components/UtilityButtons';

const Main = () => {
  const { data, isLoading } = usePopularRecruitments();
...

  return isLoading ? (
    <div>Loading...</div>
  ) : (
    <MainWrapper>
      <Banner {...bannerDummy} />
      <StudyListWrapper>
        <CardListInfo studyCategory="ì½”ë”© í…ŒìŠ¤íŠ¸" />
        <PopularStudyCardList studyCardsProps={popularRecruitments?.popularCodingRecruitments} />
      </StudyListWrapper>
      <StudyListWrapper>
        <CardListInfo studyCategory="ëª¨ì˜ ë©´ì ‘" />
        <PopularStudyCardList studyCardsProps={popularRecruitments?.popularInterviewRecruitments} />
      </StudyListWrapper>
      <StudyListWrapper>
        <CardListInfo studyCategory="í”„ë¡œì íŠ¸" />
        <PopularStudyCardList studyCardsProps={popularRecruitments?.popularProjectRecruitments} />
      </StudyListWrapper>
      <UtiltiyButtons>
        <Button onClick={handleScroll} className="scroll__btn">
          <Up />
          <span>ìœ„ë¡œê°€ê¸°</span>
        </Button>
      </UtiltiyButtons>
    </MainWrapper>
  );
};
...
```

## ğŸ’¡Â MSW ì ìš© ê²°ê³¼

### ğŸ› Â Service Worker ì‹¤í–‰ ì—¬ë¶€ í™•ì¸

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/c9720124-b71e-432b-9a79-6acdcf581679/Untitled.png)

- ê°œë°œì ë„êµ¬ì˜ Application íƒ­ì—ì„œ í™•ì¸í•œ ê²°ê³¼, Service Workerê°€ ì˜ ì‘ë™ë˜ê³  ìˆìŒì„ í™•ì¸

### ğŸ› Â  Mock Dataì˜ ì „ë‹¬ í™•ì¸

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/ff329ea3-2b93-4e4b-a662-0eca56c899b5/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/70767210-f391-44d2-ae7f-0651ec2b5223/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/6c232503-2a95-4e7f-ae52-6660d38ba4a7/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/88fe22bd-1360-4dde-a1cd-04e635271409/Untitled.png)

- ì½˜ì†”ì„ í†µí•´ MSWê°€ ì˜ ì‘ë™ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- Workerë¡œë¶€í„° Mock Responseë¥¼ í†µí•´ ì¸ê¸° ìˆëŠ” ëª¨ì§‘ê³µê³  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ğŸ› Â  ë©”ì¸í˜ì´ì§€ ë Œë”ë§ ê²°ê³¼

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/59cd531f-198c-4cff-83ed-a68cf85bd5a4/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/36294cea-5191-4362-9be7-70144e5b4743/46108c93-39e8-4208-b71d-f6ade06b46a9/Untitled.png)

- ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ í™”ë©´ì— ì˜ ë³´ì—¬ì£¼ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## ğŸ’¡Â MSW ì ìš© ì†Œê°

- ê³µì‹ë¬¸ì„œê°€ ì˜ ì •ë¦¬ë˜ì–´ ìˆì–´, ë¹ ë¥´ê²Œ ì ìš©ì´ ê°€ëŠ¥
- MSWë¥¼ í†µí•´ ë³„ë„ì˜ í™˜ê²½ ì—†ì´ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì— ëŒ€í•œ ëª¨ì˜ ê°€ëŠ¥
- APIì— ëŒ€í•œ ì¢…ì†ì„±ì—†ì´ FE ê°œë°œì„ ì§„í–‰í•  ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ ê²½í—˜

# ğŸ““Â ì°¸ê³ ìë£Œ

- [Mockingìœ¼ë¡œ ìƒì‚°ì„±ê¹Œì§€ ì±™ê¸°ëŠ” FE ê°œë°œ](https://tech.kakao.com/2021/09/29/mocking-fe/)
- [Service Worker](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API)
- [MSW(Mock Service Worker)ë¡œ ë”ìš± ìƒì‚°ì ì¸ FE ê°œë°œí•˜ê¸°](https://velog.io/@khy226/msw%EB%A1%9C-%EB%AA%A8%EC%9D%98-%EC%84%9C%EB%B2%84-%EB%A7%8C%EB%93%A4%EA%B8%B0#service-worker%EB%9E%80)
- [MSW](https://mswjs.io/)
